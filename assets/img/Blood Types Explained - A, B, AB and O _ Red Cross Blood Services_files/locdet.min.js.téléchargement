function getUserZipFromAkamai(){var a=$.Deferred(),c=null;$.ajax({type:"HEAD",url:window.location}).done(function(b,d,f){b=f.getResponseHeader("X-Akamai-Edgescape");null!==b&&(b=b.match(/zip=(\d{5})/),null!==b&&(c=b[0]));a.resolve(c)}).fail(function(){console.log("Error getting http headers");a.resolve(c)});return a.promise()}
function getUserZipFromBrowser(){var a=$.Deferred(),c=null,b=new google.maps.Geocoder;"geolocation"in navigator&&null!==b&&"undefined"!==typeof b?navigator.geolocation.getCurrentPosition(function(d){b.geocode({location:{lat:d.coords.latitude,lng:d.coords.longitude}},function(b,e){if(e===google.maps.GeocoderStatus.OK)for(b=b[0].address_components,e=0;e<b.length;e++){var d=b[e];"postal_code"===d.types[0]&&(c=d.short_name,console.log("userZip: "+c))}else console.log("Unable to geocode: "+e);a.resolve(c)})},
function(b){console.log("error geolocating user: ",b);a.resolve(c)},{timeout:6E4}):a.resolve(c);return a.promise()}function resolveUserZip(){var a=$.Deferred();$.when(getUserZipFromBrowser()).done(function(c){null===c?$.when(getUserZipFromAkamai()).done(function(b){null!==b?(a.resolve(b),setZipCookies(b,!0)):(a.resolve("20006"),setZipCookies("20006",!0))}):(a.resolve(c),setZipCookies(c,!0))})}
function gm_authFailure(){var a=$.Deferred();$.when(getUserZipFromAkamai()).done(function(c){null!==c?(a.resolve(c),setZipCookies(c,!0)):(a.resolve("20006"),setZipCookies("20006",!0))})}function setZipCookies(a,c){null!=a&&(Cookies.set("LOCATION_ZIP",a),a=new CustomEvent("zipCookieChange",{detail:a}),window.dispatchEvent(a));Cookies.set("LOCATION_ZIP_RECHECK",c)};