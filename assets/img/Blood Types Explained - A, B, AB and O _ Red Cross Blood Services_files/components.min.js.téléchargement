(function(a){a(".hospital-title").click(function(){a(this).find(".title-expand").hasClass("fa-plus")?(a(".hospital-login-list-container").removeAttr("hidden"),a(this).find(".title-expand").removeClass("fa-plus").addClass("fa-minus")):(a(".hospital-login-list-container").attr("hidden",!0),a(this).find(".title-expand").removeClass("fa-minus").addClass("fa-plus"));a(".login-title").find(".title-expand").hasClass("fa-plus")&&a(".login-title").addClass("collapse")})})(jQuery);
(function(a){a(".bdc-title").click(function(){a(this).find(".title-expand").hasClass("fa-plus")?(a(".bdc-login-container").removeAttr("hidden"),a(".bdc-forgot-password-container").attr("hidden",!0),a(this).find(".title-expand").removeClass("fa-plus").addClass("fa-minus")):(a(".bdc-login-container").attr("hidden",!0),a(".bdc-forgot-password-container").attr("hidden",!0),a(this).find(".title-expand").removeClass("fa-minus").addClass("fa-plus"));a(".login-title").find(".title-expand").hasClass("fa-plus")&&
a(".login-title").addClass("collapse")});a(".login-bdc-forg-pass").click(function(){a(".bdc-login-container").attr("hidden",!0);a(".bdc-forgot-password-container").removeAttr("hidden")});a(".bdc-forgot-password-container .redcross-submit-button button[type\x3dsubmit]").click(function(){var g=a("#api-urls").data("api-bdc")+"/userProfile/forgotPassword",c=a("input[name\x3dbdcemailaddress]").val();/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(c)?(a(".forgot-password-form--email-error").css("display",
"none"),c={email:a("input[name\x3dbdcemailaddress]").val()},jQuery.ajax({url:g,type:"POST",data:JSON.stringify(c),dataType:"json",contentType:"application/json; charset\x3dutf-8",xhrFields:{withCredentials:!1},success:function(c){a(".forgot-password-form--submit-success").show();a(".forgot-password-form--submit-error").hide()},statusCode:{201:function(){a(".forgot-password-form--submit-success").show();a(".forgot-password-form--submit-error").hide()},401:function(){a(".forgot-password-form--submit-error").show();
a(".forgot-password-form--submit-success").hide()},500:function(){a(".forgot-password-form--submit-error").show();a(".forgot-password-form--submit-success").hide()}}})):a(".forgot-password-form--email-error").css("display","block")})})(jQuery);
jQuery(function(a){function g(a){var b=d.data("signed-in-link");d.find("a").attr("href",b).html("Hi, "+a)}function c(){var b=JSON.parse(f("RCB_PROFILE_firstName"))||{token:""},q=localStorage.getItem("RCB_AUTH");b.token===q?g(b.firstName):(b=a("#api-urls").data("api-blood")+"/profile",a.ajax({url:b,type:"GET",xhrFields:{withCredentials:!0},success:function(a){var b={firstName:a.profile.firstName,token:localStorage.getItem("RCB_AUTH")},q={userName:a.profile.username,firstName:a.profile.firstName,lastname:a.profile.lastName,
zipCode:a.profile.address.zipCode};e("RCB_PROFILE_firstName",JSON.stringify(b),1);e("profile",JSON.stringify(q),1);Cookies.set("LOCATION_ZIP_RECHECK","false");window.digitalData.user.userName="OID_"+a.profile.username;g(b.firstName)},error:function(a,b){console.error(a.responseText);return!1}}))}function e(a,q,c){if(c){var b=new Date;b.setTime(b.getTime()+864E5*c);c="; expires\x3d"+b.toGMTString()}else c="";document.cookie=a+"\x3d"+q+c+"; path\x3d/"}function f(a){return(a=document.cookie.match(new RegExp(a+
"\x3d([^;]+)")))?a[1]:null}var d=a('[data-utility-nav\x3d"sign-in"]');d.length&&localStorage.getItem("RCB_AUTH")&&c()});
(function(a){function g(a){window.location.href=c+"/search?term\x3d"+a+"\x26page\x3d1\x26start\x3d0"}var c=a(".search-box-rcb").data("search-path");c&&-1===c.indexOf(".html")&&(c+=".html");var e=a(".rcb-site-search-container"),f=e.find(".search-clear"),d=e.find(".site-search-rcb"),b=e.find(".search-box-rcb");e=e.find(".search-submit-rcb");a(".rcb-search-toggle span").on("click",function(b){b.stopPropagation();a(".rcb-site-search-container, .rcb-search-toggle").toggleClass("open");a(".rcb-mobile-menu").toggleClass("search-open")});
f.on("click",function(a){a.preventDefault();d.val("")});a("body").on("click",function(){a(".rcb-site-search-container, .rcb-search-toggle").removeClass("open");a(".rcb-mobile-menu").removeClass("search-open")});b.on("click",function(a){a.stopPropagation()});e.on("click",function(){g(a(this).siblings(".site-search-rcb").val())});d.keypress(function(b){13===b.which&&g(a(this).val())})})(jQuery);
(function(a){a(".rcb-main-nav-link").on("click",function(){768>a(window).width()&&(a(this).hasClass("open")?(a(".rcb-main-nav-link").removeClass("open"),a(".rcb-dropdown").removeClass("open").slideUp(200)):(a(".rcb-main-nav-link").removeClass("open"),a(".rcb-dropdown").removeClass("open").slideUp(200),a(this).addClass("open").next(".rcb-dropdown").addClass("open").slideDown(200)))});a(".rcb-dropdown-wide").on("click",".rcb-secondary-header-li",function(){768>a(window).width()&&(a(this).hasClass("open")?
a(this).removeClass("open").next(".rcb-secondary-links-container").find(".rcb-secondary-links").removeClass("open").slideUp(200):(a(".rcb-secondary-links, .rcb-secondary-header-li").removeClass("open"),a(".rcb-secondary-links").slideUp(200),a(this).addClass("open").next(".rcb-secondary-links-container").find(".rcb-secondary-links").addClass("open").slideDown(200)))});a(window).on("resize",function(){768<a(window).width()&&(a(".rcb-dropdown, .rcb-secondary-links").removeAttr("style"),a(".rcb-main-nav-link, .rcb-dropdown, .rcb-secondary-header-li, .rcb-secondary-links").removeClass("open"))})})(jQuery);
var $dropdown=$(".rcb-main-nav-section").find(".rcb-dropdown");$dropdown.each(function(){var a=$(this);0==a.find(".rcb-secondary-links-container").children("li").length&&a.siblings(".rcb-main-nav-link").addClass("no-secondary")});
(function(a){a("#rcb-mobile-nav-hotspot").click(function(){a("#rcb-nav-icon").toggleClass("open");a(".rcb-mobile-menu").toggleClass("open");a(".rcb-main-nav-link").hasClass("open")?(a(".rcb-main-nav-link").removeClass("open"),a(".rcb-dropdown").removeClass("open").slideUp(200)):(a(".rcb-main-nav-link").removeClass("open"),a(".rcb-dropdown").removeClass("open").slideUp(200),a(this).addClass("open").next(".rcb-dropdown").addClass("open").slideDown(200))})})(jQuery);
(function(a,g){function c(){var b=a(".login-form");d(b);e(b);q(b);a(".login-title").click(function(){a(this).find(".title-expand").hasClass("fa-plus")?(a(".login-form.signin-form").removeAttr("hidden"),a(this).find(".title-expand").removeClass("fa-plus").addClass("fa-minus"),a(this).removeClass("collapse")):(a(".login-form.signin-form").attr("hidden",!0),a(this).find(".title-expand").removeClass("fa-minus").addClass("fa-plus"),a(this).addClass("collapse"))});(b=window.location.hash)?(b=a(b),b.length?
b.trigger("click"):(a(".login-title").trigger("click"),a(".bdc-title").trigger("click"),a(".hospital-title").trigger("click"))):(a(".login-title").trigger("click"),a(".bdc-title").trigger("click"),a(".hospital-title").trigger("click"))}function e(b){b.each(function(b,c){var d=a(c);d.find(".submit-button-container button").on("click",function(b){b.preventDefault();if(m(d))return!1;var c=d.find(".login-password").val(),q=d.find(".login-username").val(),e=d.find("#stay-signed-in").is(":checked")||!1,
t,p;d.is(".login-form.signin-form")&&grecaptcha.ready(function(){grecaptcha.execute(a("#api-urls").data("recaptcha-key"),{action:"submit"}).then(function(b){b||k(d);t=a("#api-urls").data("api-auth")+"/login";p={password:c,provider:"RCB",stayLoggedIn:e,username:q,captcha:b};f(t,p,d,q)})});d.is("#bdc-login-form")&&grecaptcha.ready(function(){grecaptcha.execute(a("#api-urls").data("recaptcha-key"),{action:"submit"}).then(function(b){b||k(d);t=a("#api-urls").data("api-bdc")+"/auth/login";p={password:c,
role:a("input[name\x3dbdc-login-type]:checked").val(),username:q};f(t,p,d,q)})})})})}function f(a,c,d,q){jQuery.ajax({url:a,type:"POST",data:JSON.stringify(c),dataType:"json",contentType:"application/json; charset\x3dutf-8",xhrFields:{withCredentials:!0},success:function(a){d.is("#bdc-login-form")||b(q);window.location.href=d.attr("redirect")},statusCode:{201:function(){window.location.href=d.attr("redirect")},400:function(){p(d)},401:function(){k(d)},403:function(){d.find(".login-password-wrapper").removeClass("error");
d.find(".login-username-wrapper").removeClass("error");d.find(".username-password-error").attr("hidden","");d.find(".server-error:not(.server-error-403)").attr("hidden","");d.find(".server-error-403").removeAttr("hidden")},500:function(){p(d)}}})}function d(a){var b=g.getElementById("api-urls").dataset.recaptchaKey;(a.is(".login-form.signin-form")||a.is("#bdc-login-form"))&&b&&(g.createElement("script"),a=g.createElement("script"),a.setAttribute("async",""),a.setAttribute("defer",""),a.src="https://www.google.com/recaptcha/api.js?render\x3d"+
b,g.querySelector("head").appendChild(a),b||console.error("No recaptcha key is defined."))}function b(a){var b=new Uint32Array(12);(window.crypto||window.msCrypto).getRandomValues(b);this.cookie_value=b=window&&window.Uint32Array?b.join(""):"";localStorage.setItem("RCB_AUTH",b);g.cookie="profile\x3d"+JSON.stringify({username:a})+";path\x3d/";window.digitalData.user.userName="OID_"+a}function q(b){b.find(".user-input-fields input").each(function(){a(this).on("focus",function(){var d=a(this).closest(".user-input-field");
d.removeClass("error");d.find(".login-error").attr("hidden","");d.find(".login-error-invalid").attr("hidden","");b.find(".server-error").attr("hidden","");b.find(".username-password-error").attr("hidden","")})})}function m(b){var d=!1;""===a.trim(b.find(".login-username").val())&&(b.find(".login-username-wrapper").addClass("error"),b.find(".login-username-error-empty").removeAttr("hidden"),d=!0);""===a.trim(b.find(".login-password").val())&&(b.find(".login-password-wrapper").addClass("error"),b.find(".login-password-error-empty").removeAttr("hidden"),
d=!0);return d}function p(a){a.find(".login-password-wrapper").removeClass("error");a.find(".login-username-wrapper").removeClass("error");a.find(".username-password-error").attr("hidden","");a.find(".server-error-403").attr("hidden","");a.find(".server-error:not(.server-error-403)").removeAttr("hidden")}function k(a){a.find(".server-error:not(.server-error-403)").attr("hidden","");a.find(".server-error-403").attr("hidden","");a.find(".login-password-wrapper").addClass("error");a.find(".login-username-wrapper").addClass("error");
a.find(".username-password-error").removeAttr("hidden")}a(g).on("ready",function(){c()})})(jQuery,document);
(function(a){function g(){void 0!==window.orientation&&(0===window.orientation||180===window.orientation)&&767>=a(window).width()?1===a('div[data-jump-link-analytics\x3d"link-rcb-event-no-delete"] .row .par-2 div.image').length?a('div[data-jump-link-analytics\x3d"link-rcb-event-no-delete"] .row').css("flex-direction","column-reverse"):a('div[data-jump-link-analytics\x3d"link-rcb-event-no-delete"] .row').css("flex-direction",""):a('div[data-jump-link-analytics\x3d"link-rcb-event-no-delete"] .row').css("flex-direction",
"")}function c(a){a=new Date(a);var b=a.getHours(),c="AM";12<=b&&(c="PM",b-=12);0===b&&(b=12);var e=a.getMinutes();10>e&&(e="0"+e);b=b+":"+e+" "+c;return{date:f[a.getMonth()]+" "+a.getDate(),year:a.getFullYear(),hour:a.getHours(),time:b,suffix:c,day:d[a.getDay()]}}g();a(window).on("resize",function(a){g()});var e=-1<navigator.userAgent.indexOf("Chrome");-1<navigator.userAgent.indexOf("Safari")&&!e&&a(".image-wrapper").addClass("is-safari");var f="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");a(".rcb-event-promo-info-container").each(function(){var b=a(this).find(".event_date"),d=b.data("singledate");if(d)d=c(d),b.html('\x3cdiv class\x3d"day"\x3e'+d.day+"\x3c/div\x3e"),b.append(d.date+", "+d.year+"\x3cbr\x3e\n");else{d=b.data("startdatetime");var e=b.data("enddatetime");if(d&&e)if(d=c(d),e=c(e),b.html('\x3cdiv class\x3d"day"\x3e'+d.day+"\x3c/div\x3e"),d.date+" "+d.year===e.date+" "+e.year)b.append(e.date+", "+d.year+
"\x3cbr\x3e\n"),d.hour<e.hour&&b.append('\x3cdiv class\x3d"time"\x3e'+d.time+" - "+e.time+"\x3c/div\x3e");else{var f=d.date;d.year!==e.year&&(f+=", "+d.year);f+=", "+d.time;d=e.date+", "+e.year+", "+e.time;b.append('\x3cdiv class\x3d"start-day"\x3e'+f+" -\x3c/div\x3e");b.append('\x3cdiv class\x3d"day"\x3e'+e.day+"\x3c/div\x3e");b.append(d)}}})})(jQuery);
(function(a,g){var c,e,f,d,b,q,m=a(".personalization-bar"),p={},k={};if(a(".pbar-user-content").length){var t=function(a,b){var d=a.indexOf("{{");for(b=JSON.stringify(b);0<=d;){var c=!0,y=a.substr(a.indexOf("{{",d)+2,a.indexOf("}}",d)-d-2);if(0<=b.indexOf(y)){for(var e=b.indexOf(y)+y.length+2;" "===b.charAt(e)||'"'===b.charAt(e);)e++;for(c=e;'"'!==b.charAt(c)&&","!==b.charAt(c)&&c<b.length;c++);c=b.substr(e,c-e);a=a.replace("{{"+y+"}}",c);c=!1}if(c&&0>a.indexOf("{{",d+2))break;d=a.indexOf("{{")}return a},
B=function(a){if(a.schedule)var b=a.schedule.donationType;else a.appointment&&(b=a.appointment.donationType);if(b)switch(b){case "PLATELETS":case "APHERESIS":return"Platelets";case "POWER_RED":case "DOUBLE_RED":return"Power Red";case "PLASMA":return"Plasma";default:return"Blood"}else return!1},z=function(a){var b=new Date,d=Date;a=a.time.split(" ");var c=a[0].split("/");d=new d(""+c[2]+"-"+c[0]+"-"+c[1]+"T"+a[1]);return b.getTime()>d.getTime()},C=function(a){a=a.split(" ")[1];a=a.slice(0,5);var b=
a.split(":")[0],d=a.split(":")[1];b=parseInt(b);return 13<=b?b-12+":"+d+" PM":a+" AM"},r=function(a){return(new Date(a)).toLocaleDateString(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric"})},x=function(a){a.startDate.split("/");var b=a.startDate;b.split("/");var d=a.timeOpen,c=d.split(" - ")[0];d=d.split(" - ")[1];return"?driveId\x3d"+a.driveId+"\x26driveName\x3d"+a.driveName+"\x26driveDate\x3d"+b+"\x26siteCity\x3d"+a.address.city+"\x26siteState\x3d"+a.address.state+"\x26siteZipCode\x3d"+
a.address.zipCode+"\x26endTime\x3d"+d+"\x26startTime\x3d"+c+"\x26siteLine1\x3d"+a.address.addressLine1+"\x26siteLine2\x3d"+a.address.addressLine2+"\x26distance\x3d"+a.distance},u=function(){if(c&&"OK"===c.status){var k=a(".pbar-user"),h=a(".pbar-detail-messages"),m=a(".pbar-donor-message"),g=a(".pbar-user-title").attr("data-title-text")?a(".pbar-user-title").attr("data-title-text"):a(".pbar-user-title").text(),v=k.attr("data-donor-message"),l=k.attr("data-history-message");k.attr("data-eligible-message");
a(".pbar-user-title").text(t(g,c));v&&0<c.donorData.totalOverallUnits&&(m.text(t(v,c)),m.append("\x3cbr\x3e"));m=!1;var n=(new Date).getTime();c.donorData.nextEligibleDateForWholeBlood&&(m=(new Date(c.donorData.nextEligibleDateForWholeBlood)).getTime()<=n);g=!1;c.donorData.nextEligibleDateForPlatelets&&(g=(new Date(c.donorData.nextEligibleDateForPlatelets)).getTime()<=n);v=!1;c.donorData.doubleRedDate&&(v=(new Date(c.donorData.doubleRedDate)).getTime()<=n);var u=!1;c.donorData.nextEligibleDateForPlasma&&
(u=(new Date(c.donorData.nextEligibleDateForPlasma)).getTime()<=n);n="";n=c.donorData.totalOverallUnits?l?n+(t(l,c)+"\x3cbr /\x3e"):n+("Thank you for your "+c.donorData.totalOverallUnits+" donations.\x3cbr /\x3e"):n+"You are currently eligible to donate Blood";c.donorData.donationType?"BLOOD"==c.donorData.donationType&&m?(l="Blood ",n=h.data("donate-text")?n+(h.data("donate-text")+l+" \x3cbr /\x3e"):n+("You are currently eligible to donate "+l+"\x3cbr /\x3e")):"BLOOD"!=c.donorData.donationType||m?
"DOUBLE_RED_CELL"!=c.donorData.donationType&&"POWER_RED"!=c.donorData.donationType||!v?"DOUBLE_RED_CELL"!=c.donorData.donationType&&"POWER_RED"!=c.donorData.donationType||v?"PLATELETS"!=c.donorData.donationType&&"APHERESIS"!=c.donorData.donationType||!g?n="PLATELETS"!=c.donorData.donationType||g?n+"You are currently eligible to donate Blood":n+("You will be eligible to donate"+c.donorData.donationType+"on"+c.donorData.nextEligibleDateForPlatelets+"\x3cbr /\x3e"):(l="Platelets",n=h.data("donate-text")?
n+(h.data("donate-text")+l+" \x3cbr /\x3e"):n+("You are currently eligible to donate "+l+"\x3cbr /\x3e")):n+="You will be eligible to donate."+c.donorData.donationType+"on"+c.donorData.doubleRedDate+"\x3cbr /\x3e":(l="Power Red",n=h.data("donate-text")?n+(h.data("donate-text")+l+" \x3cbr /\x3e"):n+("You are currently eligible to donate "+l+"\x3cbr /\x3e")):n+="You will be eligible to donate."+c.donorData.donationType+"on"+c.donorData.nextEligibleDateForWholeBlood+"\x3cbr /\x3e":"PLASMA"==c.donorData.donationType&&
u&&(l="Plasma",n=h.data("donate-text")?n+(h.data("donate-text")+l+" \x3cbr /\x3e"):n+("You are currently eligible to donate "+l+"\x3cbr /\x3e"));h.html(n);h=a(".view-account-button");h.length&&((l=h.attr("data-aa-link-button"))?h.attr("href",l):h.attr("href","/content/rcbblooddrive.html/my-account"));h=a(".personal-bar-contents");l=a(".personal-bar-link");f&&f.list.length&&z(f.list[0])?(l.attr("data-aa-link-button",h.attr("data-upcoming-url")),h.attr("data-upcoming-url")?(l.attr("href",h.attr("data-upcoming-url")),
l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-manageAppt"))):(l.attr("href","/content/rcbblooddrive.html/my-account"),l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-view-my-account"))),h.text(h.attr("data-upcoming-label")),-1<l.attr("href").indexOf("donation-time")&&(q=x(f.list[0])),a(".pbar-drive-title").text("Upcoming Appointment"),a(".pbar-drive-subtitle").text(r(f.list[0].date)+" | "+C(f.list[0].time)),n=f.list[0].location+"\x3cbr /\x3e"+f.list[0].address.addressLine1+
"\x3cbr /\x3e",f.list[0].address.addressLine2&&(n+=f.list[0].address.addressLine2+"\x3cbr /\x3e"),n+=f.list[0].address.city+", "+f.list[0].address.state+" "+f.list[0].address.zipCode,a(".pbar-drive-content").html(n)):b&&null!=b.drive&&null!=b.schedule&&0!==c.donorData.totalOverallUnits?(l.attr("data-aa-link-button",h.attr("data-recommend-url")),h.attr("data-recommend-url")?(l.attr("href",h.attr("data-recommend-url")),l.attr("data-aa-confirm-appointment-personalization-bar-button",h.attr("data-aa-confirmAppt"))):
(l.attr("href","/content/rcbblooddrive.html/my-account"),l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-view-my-account"))),h.text(h.attr("data-recommend-label")),-1<l.attr("href").indexOf("donation-time")&&(q=x(b)),h=B(p),l="",h&&(l=" | "+h),a(".pbar-drive-title").text("Recommended Appointment"),a(".pbar-drive-subtitle").text(r(b.drive.startDate)+" | "+b.schedule.time+l),n=b.drive.driveName+"\x3cbr /\x3e"+b.drive.address.addressLine1+"\x3cbr /\x3e",b.drive.address.addressLine2&&(n+=
b.drive.address.addressLine2+"\x3cbr /\x3e"),n+=b.drive.address.city+", "+b.drive.address.state+" "+b.drive.address.zipCode,a(".pbar-drive-content").html(n)):e&&e.list.length?(l.attr("data-aa-link-button",h.attr("data-suggest-url")),h.attr("data-suggest-url")?(l.attr("href",h.attr("data-suggest-url")),l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-makeAppt"))):(l.attr("href","/content/rcbblooddrive.html/my-account"),l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-view-my-account"))),
h.text(h.attr("data-suggest-label")),-1<l.attr("href").indexOf("donation-time")&&(q=x(e.list[0])),a(".pbar-drive-title").text("Suggested Drive"),a(".pbar-drive-subtitle").text(r(e.list[0].startDate)+" | "+e.list[0].timeOpen),n=e.list[0].driveName+"\x3cbr /\x3e"+e.list[0].address.addressLine1+"\x3cbr /\x3e",e.list[0].address.addressLine2&&(n+=e.list[0].address.addressLine2+"\x3cbr /\x3e"),n+=e.list[0].address.city+", "+e.list[0].address.state+" "+e.list[0].address.zipCode,a(".pbar-drive-content").html(n)):
d&&d.list.length&&(l.attr("data-aa-link-button",h.attr("data-suggest-url")),h.attr("data-suggest-url")?(l.attr("href",h.attr("data-suggest-url")),l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-makeAppt"))):(l.attr("href","/content/rcbblooddrive.html/my-account"),l.attr("data-aa-personalization-bar-buttons",h.attr("data-aa-view-my-account"))),h.text(h.attr("data-suggest-label")),-1<l.attr("href").indexOf("donation-time")&&(q=x(d.list[0])),a(".pbar-drive-title").text("Suggested Drive"),
a(".pbar-drive-subtitle").text(r(d.list[0].startDate)+" | "+d.list[0].timeOpen),n=d.list[0].driveName+"\x3cbr /\x3e"+d.list[0].address.addressLine1+"\x3cbr /\x3e",d.list[0].address.addressLine2&&(n+=d.list[0].address.addressLine2+"\x3cbr /\x3e"),n+=d.list[0].address.city+", "+d.list[0].address.state+" "+d.list[0].address.zipCode,a(".pbar-drive-content").html(n));k.removeAttr("hidden");a(".pbar-drive").removeAttr("hidden")}},D=function(b,d){var c=JSON.stringify({driveDate:b.date,driveId:b.driveId,
timeSlotId:b.timeSlotId});a.ajax({url:w+"/appointments",type:"POST",contentType:"application/json",data:c,processData:!1,xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("accept","application/json;charset\x3dUTF-8")},success:function(a){sessionStorage.setItem("rcb-appointment-details",JSON.stringify(a));window.location=d+"/appointment-thank-you"},error:function(a,b){b=JSON.parse(a.responseText);b.errors&&b.errors.GENERAL_ERROR&&b.errors.GENERAL_ERROR[0]&&(a={errorBody:JSON.parse(a.responseText),
requestObj:c,driveObj:p},sessionStorage.setItem("rcb-conflict-details",JSON.stringify(a)),window.location=d+"/conflicting-appointment")}})},E=function(){a.ajax({url:w+"/appointments/one-click",type:"GET",xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("accept","application/json;charset\x3dUTF-8")},success:function(a){b=a;a.drive&&(p=a.drive,p.appointment=a.schedule||{},k=Object.assign({},{date:""+a.drive.startDate},{driveId:""+a.drive.driveId},{timeSlotId:""+a.schedule.timeSlotId}))},
error:function(a,b){console.error(a.responseText);m.addClass("pbar-hide")},complete:function(a,d){b&&null!=b.drive&&null!=b.schedule&&0!==c.donorData.totalOverallUnits?u():G()}})},F=function(){if(c){var b=new Date,e=new Date(b.getTime());b.setDate(b.getDate()+1);e.setDate(e.getDate()+10);b={city:c.profile.address.city,donationTypes:["PLATELETS","BLOOD","DOUBLE_RED_CELL","PLASMA"],endDate:formatBasicDate(b),limit:1,order:"DISTANCE",range:10,startDate:formatBasicDate(e),state:c.profile.address.state,
suggestIfBlank:!0,zipCode:c.profile.address.zipCode};a.ajax({url:w+"/drives",xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("accept","application/json;charset\x3dUTF-8");a.setRequestHeader("content-type","application/json;charset\x3dUTF-8")},type:"POST",data:JSON.stringify(b),success:function(a){d=a},error:function(a,b){console.error(a.responseText);m.addClass("pbar-hide")},complete:function(a,b){u()}})}},G=function(){a.ajax({url:w+"/drives/recommended",type:"GET",xhrFields:{withCredentials:!0},
beforeSend:function(a){a.setRequestHeader("accept","application/json;charset\x3dUTF-8")},success:function(a){e=a},error:function(a,b){console.error(a.responseText);m.addClass("pbar-hide")},complete:function(a,b){e&&e.list.length?u():F()}})},H=function(){a.ajax({url:w+"/appointments",type:"GET",xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("accept","application/json;charset\x3dUTF-8")},success:function(a){f=a},error:function(a,b){console.error(a.responseText);m.addClass("pbar-hide")},
complete:function(a,b){f&&f.list.length&&z(f.list[0])?u():E()}})};g=function(){a.ajax({url:w+"/profile",type:"GET",xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("accept","application/json;charset\x3dUTF-8")},success:function(a){c=a},error:function(a,b){console.error(a.responseText);m.addClass("pbar-hide")},complete:function(a,b){H()}})};m.attr("data-context","personalization-bar");var A=a("#api-urls");var w=A.data("api-blood");A.data("api-auth");(auth=localStorage.getItem("RCB_AUTH"))&&
g();a(".personalization-bar").on("click",".personal-bar-link",function(b){b.preventDefault();b=a(".personal-bar-link");var d=b.attr("href"),c=d.substr(0,d.lastIndexOf("/"));-1<b.attr("href").indexOf("donation-time")?window.location.href=d+q:-1<b.attr("href").indexOf("my-account")?window.location.href=d:D(k,c)})}})(jQuery,document);
(function(a,g){g=-1<navigator.userAgent.indexOf("Chrome");-1<navigator.userAgent.indexOf("Safari")&&!g&&a(".image-wrapper").addClass("is-safari");a("[data-aa-get-directions]").each(function(c,e){c=a(e).attr("href");c=encodeURI(c).replace("#","%23");a(e).attr("href",c)})})(jQuery,document);
(function(a){function g(f){f=a(f).parent(".zip-input-btn");var d=f.find("#zip-forms-certs");f.find(".redcross-button");e=d.val();a("#results-target").html("");e?/^([0-9]{5})$/.test(e)&&(f=a("#api-urls").data("api-lookup"),a.ajax({async:!1,type:"GET",url:f+"/region-mappings/"+e+"?type\x3dRCB",dataType:"json",success:function(a){c(a)}})):(d.attr("placeholder","*Required"),d.attr("data-aa-forms-certificate-error","zip-required"),d.addClass("error-border"))}function c(c){c&&c.length?a.ajax({async:!1,
type:"GET",url:"/bin/formsAndCertificates."+c[0].regionAbbreviation+".json",dataType:"json",success:function(d){var b=!1;if(d.certifications&&d.certifications.length){b=!0;var c=d.certifications;var f=a('\x3cdiv class\x3d"results-area container certs-container" data-context\x3d"results-area-container-certs-container"\x3e\x3c/div\x3e').last();a("#results-target").append(f).last();var g=a('\x3cdiv class\x3d"certificates-title"\x3eCertificates\x3c/div\x3e');f.append(g).last();row=a('\x3cdiv class\x3d"row"\x3e\x3c/div\x3e').last();
g.after(row);var k;for(k=0;k<c.length;k++)for(category=c[k],j=0;j<category.length-1;j++)f='\x3cdiv class\x3d"col col-sm-6 col-lg-4 certificate-detail"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"certificate-name"\x3e[name]\x3c/div\x3e\x3cp\x3e[effective.date]\x3c/p\x3e\x3cdiv class\x3d"redcross-button left" data-context\x3d"redcross-button"\x3e\x3ca href\x3d"[path]" data-aa-forms-certificate-name\x3d"[name]"\x3e\x3cbutton class\x3d"red  small "\x3e\x3cspan class\x3d"contents"\x3eDownload\x3c/span\x3e\x3c/button\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'.replace("[effective.date]",
category[j].effectiveDate).replace("[name]",category[j].title?category[j].title:category[j].name).replace("[path]",category[j].path),f=f.replace("[name]",category[j].title?category[j].title:category[j].name),row.append(f)}if(d.forms&&d.forms.length)for(b=!0,d=d.forms,k=0;k<d.length;k++)for(f=a('\x3cdiv class\x3d"results-area container certs-container" data-context\x3d"results-area-container-certs-container"\x3e\x3c/div\x3e').last(),a("#results-target").append(f),category=d[k],g='\x3cdiv class\x3d"form-category"\x3e\x3cdiv class\x3d"category-title"\x3e[form.category]\x3c/div\x3e'.replace("[form.category]",
category[category.length-1].category),g=a(g).last(),f.append(g),row=a('\x3cdiv class\x3d"row"\x3e\x3c/div\x3e').last(),g.after(row),j=0;j<category.length-1;j++)g='\x3cdiv class\x3d"col col-sm-6 col-lg-4 certificate-detail"\x3e\x3cdiv class\x3d"panel"\x3e\x3cdiv class\x3d"certificate-name"\x3e[name]\x3c/div\x3e\x3cp\x3e[effective.date]\x3c/p\x3e\x3cdiv class\x3d"redcross-button left" data-context\x3d"redcross-button"\x3e\x3ca href\x3d"[path]" data-aa-forms-certificate-name\x3d"[name]"\x3e\x3cbutton class\x3d"red  small "\x3e\x3cspan class\x3d"contents"\x3eDownload\x3c/span\x3e\x3c/button\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'.replace("[effective.date]",
category[j].effectiveDate).replace("[name]",category[j].title?category[j].title:category[j].name).replace("[path]",category[j].path),g=g.replace("[name]",category[j].title?category[j].title:category[j].name),row.append(g);b?(a(".results-area .no-results").removeClass("error"),a(".results-area .no-results").addClass("hide")):(a("#zip-form-certs").addClass("error-border"),a(".results-area .no-results.default").text("Your zip code "+e+" returned no results. Please review the zip code."),a(".results-area .no-results.default").attr("data-context",
"error"),a(".results-area .no-results.default").attr("data-aa-forms-certificate-result",e),a(".results-area .no-results").removeClass("hide"),a(".results-area .no-results").addClass("error"))},error:function(a,b){console.error(b)}}):(a("#zip-form-certs").addClass("error-border"),a(".results-area .no-results.default").text("Your zip code "+e+" returned no results. Please review the zip code."),a(".results-area .no-results.default").attr("data-context","error"),a(".results-area .no-results.default").attr("data-aa-forms-certificate-result",
e),a(".results-area .no-results").removeClass("hide"),a(".results-area .no-results").addClass("error"))}var e;a("#zip-forms-certs").keydown(function(a){13===a.keyCode&&(a.preventDefault(),g(a.target))});a(".zip-input-btn .redcross-button").click(function(c){c.preventDefault();c=a(c.target).parents(".forms-and-certs").find("input")[0];g(c)});a(".forms-and-certs").attr("data-context","forms-and-certs")})(jQuery);
(function(a){function g(a){a=new Date(a);var b=a.getHours(),d="AM";12<=b&&(d="PM",b-=12);0===b&&(b=12);var c=a.getMinutes();10>c&&(c="0"+c);b=b+":"+c+" "+d;return{date:e[a.getMonth()]+" "+a.getDate(),year:a.getFullYear(),hour:a.getHours(),time:b,suffix:d,day:f[a.getDay()]}}var c=-1<navigator.userAgent.indexOf("Chrome");-1<navigator.userAgent.indexOf("Safari")&&!c&&a(".image-wrapper").addClass("is-safari");var e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");
a(".event-promo-info-container").each(function(){var d=a(this).find(".event_date"),b=d.data("singledate");if(b)b=g(b),d.html('\x3cdiv class\x3d"day"\x3e'+b.day+"\x3c/div\x3e"),d.append(b.date+", "+b.year+"\x3cbr\x3e\n");else{b=d.data("startdatetime");var c=d.data("enddatetime");if(b&&c)if(b=g(b),c=g(c),d.html('\x3cdiv class\x3d"day"\x3e'+b.day+"\x3c/div\x3e"),b.date+" "+b.year===c.date+" "+c.year)d.append(c.date+", "+b.year+"\x3cbr\x3e\n"),b.hour<c.hour&&d.append('\x3cdiv class\x3d"time"\x3e'+b.time+
" - "+c.time+"\x3c/div\x3e");else{var e=b.date;b.year!==c.year&&(e+=", "+b.year);e+=", "+b.time;b=c.date+", "+c.year+", "+c.time;d.append('\x3cdiv class\x3d"start-day"\x3e'+e+" -\x3c/div\x3e");d.append('\x3cdiv class\x3d"day"\x3e'+c.day+"\x3c/div\x3e");d.append(b)}}})})(jQuery);
jQuery(function(a){function g(a){a=a.serializeArray();for(var b={},c=0;c<a.length;c++)"g-recaptcha-response"!==a[c].name&&(b[a[c].name]=a[c].value);return JSON.stringify(b)}var c=a(".hospital-contact-form"),e=c.find(".form-text-field, .form-comment-field"),f=a(".holder + input, .holder + textarea");c.submit(function(d){function b(){var b=c.attr("action"),d=g(c);a.post({url:b,data:d,processData:!1,contentType:"application/json"}).always(function(b){c.addClass("hospital-contact-us-hide");c.attr("data-context",
"hospital-contact-form hospital-contact-us-hide");a(".hospital-contact-form-header").addClass("hospital-contact-us-hide");a(".hospital-contact-thank").removeClass("hospital-contact-us-hide")})}d.preventDefault();d=!0;for(var f=0;f<e.length;f++){var m=e[f],p=a(m),k=p.next();p.removeClass("error");p.attr("data-context","form-text-field");m.validity.valueMissing?(p.addClass("error"),p.attr("data-context","error"),k.text(k.data("errorRequired")),k.attr("data-aa-hospital-contact-us-error-msg",p.attr("name")+
" "+k.data("errorRequired")),d=!1):"email"!==m.name||m.validity.valid?"phone"!==m.name&&"zipCode"!==m.name||!m.validity.patternMismatch||(p.addClass("error"),p.attr("data-context","error"),k.text(k.data("errorInvalid")),k.attr("data-aa-hospital-contact-us-error-msg",p.attr("name")+" "+k.data("errorInvalid")),d=!1):(p.addClass("error"),p.attr("data-context","error"),k.text(k.data("errorInvalid")),k.attr("data-aa-hospital-contact-us-error-msg",p.attr("name")+" "+k.data("errorInvalid")),d=!1)}f=a(".g-recaptcha");
k=f.next();f.removeClass("error");f.attr("data-context","g-recaptcha");""===grecaptcha.getResponse()&&(f.addClass("error"),f.attr("data-context","error"),k.text(k.data("errorRequired")),d=!1);d&&b()});f.keydown(function(c){var b=a(this);c=c.keyCode||c.charCode;var d=b.val().length,e=b.val().length-1;0!==d+1&&8!==c?b.prev(".holder").hide():0!==e&&-1!==e&&8===c?b.prev(".holder").hide():b.prev(".holder").show()});f.focusout(function(){var c=a(this);0===c.val().length&&c.prev(".holder").show()});a(".holder").click(function(){a(this).next().focus()})});
jQuery(function(a){function g(a){a=a.serializeArray();for(var b={},c=0;c<a.length;c++)"g-recaptcha-response"!==a[c].name&&(b[a[c].name]=a[c].value);return JSON.stringify(b)}function c(b){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&a("html, body").animate({scrollTop:b.offset().top},200)}var e=a("a[data-att-button\x3d'contact-us']"),f=a(".close-contact-form"),d=a(".contact-us-wrapper");e.on("click",function(){f.hasClass("contact-us-hide")&&a(".contact-thank").hasClass("contact-us-hide")&&
!a(this).hasClass("disabled")&&(d.slideToggle(300),a(this).find("button").prop("disabled",!0).addClass("disabled"),e.find("button").hasClass("red")?e.find("button").removeClass("red"):e.find("button").hasClass("white")?e.find("button").removeClass("white"):e.find("button").hasClass("blue")?e.find("button").removeClass("blue"):e.find("button").hasClass("green")?e.find("button").removeClass("green"):a(this).addClass("disabled"),f.removeClass("contact-us-hide"),d.removeClass("contact-us-hide"),c(a(".contact-us-wrapper")))});
f.on("click",function(){d.slideToggle(200);f.addClass("contact-us-hide");e.find("button").prop("disabled",!1);e.addClass("disabled");window.location.reload()});a(".dropdown-list-inquiry").on("change",function(){for(var b=0;b<this.options.length;b++)a("#support-text-"+b).addClass("support-text-inactive");a("#support-text-"+this.options.selectedIndex).removeClass("support-text-inactive")}).change();a(".dropdown-list-inquiry").on("change",function(){var b=a('select[name\x3d"reason"]');this.value.startsWith("BPM")?
(b.removeClass("dropdown-list-inactive"),b.addClass("dropdown-list")):b.hasClass("dropdown-list")&&(b.addClass("dropdown-list-inactive"),b.removeClass("dropdown-list"),b.removeClass("error"),b.next().html(""),b.prop("selectedIndex",0))});var b=a(".contact-form"),q=b.find('.form-text-field, .form-comment-field, select[name\x3d"reason"]'),m=a(".holder + input, .holder + textarea"),p=a(".contact-thank");b.submit(function(d){function e(){var d=b.attr("action"),e=g(b);a.post({url:d,data:e,processData:!1,
contentType:"application/json"}).always(function(d){b.addClass("contact-us-hide");b.attr("data-context","contact-form contact-us-hide");a(".contact-form-header").addClass("contact-us-hide");p.removeClass("contact-us-hide");c(p)})}d.preventDefault();d=!0;for(var f=0;f<q.length;f++){var k=q[f],m=a(k),r=m.next();m.removeClass("error");m.attr("data-context","form-text-field");m.is("select")&&"Select Request"==m.val()&&!m.hasClass("dropdown-list-inactive")||m.is("input")&&k.validity.valueMissing?(m.addClass("error"),
m.attr("data-context","error"),r.text(r.data("errorRequired")),r.attr("data-aa-contact-us-error-msg",m.attr("name")+" "+r.data("errorRequired")),d=!1):"email"!==k.name||k.validity.valid?"phone"!==k.name&&"zipCode"!==k.name||!k.validity.patternMismatch||(m.addClass("error"),m.attr("data-context","error"),r.text(r.data("errorInvalid")),r.attr("data-aa-contact-us-error-msg",m.attr("name")+" "+r.data("errorInvalid")),d=!1):(m.addClass("error"),m.attr("data-context","error"),r.text(r.data("errorInvalid")),
r.attr("data-aa-contact-us-error-msg",m.attr("name")+" "+r.data("errorInvalid")),d=!1)}f=a(".g-recaptcha");r=f.next();f.removeClass("error");f.attr("data-context","g-recaptcha");""===grecaptcha.getResponse()&&(f.addClass("error"),f.attr("data-context","error"),r.text(r.data("errorRequired")),d=!1);d&&(c(a(".captcha-wrapper")),e())});m.keydown(function(b){var c=a(this);b=b.keyCode||b.charCode;var d=c.val().length,e=c.val().length-1;0!==d+1&&8!==b?c.prev(".holder").hide():0!==e&&-1!==e&&8===b?c.prev(".holder").hide():
c.prev(".holder").show()});m.focusout(function(){var b=a(this);0===b.val().length&&b.prev(".holder").show()});a(".holder").click(function(){a(this).next().focus()})});
(function(a){function g(c){var e=a(c).parent(".blood-drive-search");c=e.find(".zip-or-sponsor-code");var f=c.val();e=e.find(".find-cta-button");f?(c=encodeURIComponent(f),c=e.attr("data-aa-url")+"?zipSponsor\x3d"+c,window.open(c,"_self")):(c.attr("placeholder","*Required"),c.addClass("error-border"))}a(".find-cta-button").click(function(){g(this)});a(".zip-or-sponsor-code").keydown(function(a){13===a.keyCode&&(a.preventDefault(),g(this))})})(jQuery);